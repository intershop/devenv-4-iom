<html>
  <head>
    <title>${ID} IOM development environment</title>

    <!--meta http-equiv="refresh" content="60"-->

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- google code-prettify -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- font awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- https://github.com/daylerees/colour-schemes -->
    <style>

      body > .container {
        margin-top: 50px;
      }

      .alias-toggle {
        padding: 2px 3px;
      }

    </style>

  </head>
  <body>
    <!-- Fixed navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">${ID}</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">First steps <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#first-steps--overview">Overview</a></li>
                  <li><a href="#first-steps--config">Configuration</a></li>
                  <li><a href="#first-steps--create">Create IOM cluster</a></li>
                  <li><a href="#first-steps--use">Access IOM GUI</a></li>
                  <li><a href="#first-steps--logs">View access logs</a></li>
                  <li><a href="#first-steps--sql">Execute SQL-file</a><li>
                  <li><a href="#first-steps--delete">Delete IOM cluster</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Configuration <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#configurations--devenv4iom">Update devenv-4-iom</a></li>
                  <li><a href="#configurations--update">Update config-directory after updating devenv-4-iom</a></li>
                  <li><a href="#configurations--reset-config">Reset current configuration</a></li>
                  <li><a href="#configurations--info">Getting info about components</a></li>
                  <li><a href="#configurations--add-config">Create a new configuration/instance</a></li>
                  <li><a href="#configurations--parallel-instances">Running different IOM instances in parallel</a></li>
                  <li><a href="#configurations--delete-config">Delete current configuration/instance</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Operations <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#operations--create-cluster">Create whole IOM cluster</a></li>
                  <li><a href="#operations--delete-cluster">Delete whole IOM cluster</a></li>
                  <li><a href="#operations--create-namespace">Create namespace</a></li>
                  <li><a href="#operations--delete-namespace">Delete namespace</a></li>
                  <li><a href="#operations--create-mailserver">Create mailserver</a></li>
                  <li><a href="#operations--delete-mailserver">Delete mailserver</a></li>
                  <li><a href="#operations--create-storage">Create local Docker volume</a></li>
                  <li><a href="#operations--delete-storage">Delete local Docker volume</a></li>
                  <li><a href="#operations--create-postgres">Start postgres database</a></li>
                  <li><a href="#operations--delete-postgres">Delete postgres database</a></li>
                  <li><a href="#operations--create-iom">Create IOM</a></li>
                  <li><a href="#operations--delete-iom">Delete IOM</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Development process <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#development--deployment-gui">Deployment using the Wildfly Admin Console</a></li>
                  <li><a href="#development--deployment-cli">Deployment using Scripts</a></li>
                  <li><a href="#development--apply-mail-templates">Roll out mail templates</a></li>
                  <li><a href="#development--apply-xsl-templates">Roll out xsl templates</a></li>
                  <li><a href="#development--apply-sql-scripts">Apply sql scripts</a></li>
                  <li><a href="#development--apply-dbmigrate">Apply dbmigrate scripts</a></li>
                  <li><a href="#development--apply-sql-config">Apply sql configuration scripts</a></li>
                  <li><a href="#development--apply-json-config">Apply json configuration scripts</a></li>
                  <li><a href="#development--dump-load">Load custom dump</a></li>
                  <li><a href="#development--dump-create">Create dump</a></li>
                  <li><a href="#development--access-emails">Access E-Mails</a></li>
                  <li><a href="#development--access-pdf">Access PDF documents</a></li>
                  <li><a href="#development--testing">Testing</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Log-messages <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#log-messages--jq">jq - command-line JSON processor</a></li>
                  <li><a href="#log-messages--devenv">Log-messages of devenv-cli.sh</a></li>
                  <li><a href="#log-messages--iom-containers">Log-messages of IOM containers</a></li>
                  <li><a href="#log-messages--log-cmd">devenv-cli's 'log *' commands</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Troubleshooting <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#troubleshooting--shared-drives">Shared Drives</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Links <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="http://${HOST_IOM}:${PORT_IOM_SERVICE}/omt" target="_blank">OMT</a></li>
                  <li><a href="http://${HOST_IOM}:${PORT_IOM_SERVICE}/dbdoc/" target="_blank">DB Documentation</a></li>
                  <li><a href="http://${HOST_IOM}:${PORT_IOM_SERVICE}/omt-help/" target="_blank">Online Help</a></li>
                  <li><a href="http://${HOST_IOM}:${PORT_WILDFLY_SERVICE}/console" target="_blank">WildFly console</a></li>
                  <li><a href="http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/overview?namespace=${EnvId}" target="_blank">Kubernetes Dashboard</a></li>
                  <li><a href="http://${HOST_IOM}:${PORT_MAILHOG_UI_SERVICE}" target="_blank">Mails (Web-UI)</a></li>
                  <li><a href="http://${HOST_IOM}:${PORT_MAILHOG_UI_SERVICE}/api/v2/messages" target="_blank">Mails (REST)</a></li>
                </ul>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>

      <div class="container">

        <h1>${ID} IOM development environment</h1>

        <h2 id="first-steps">First steps</h2>
        <h3 id="first-steps--overview">Overview</h3>
        <p>
          <a href="#first-steps">First steps</a> wants you to guide through all main parts of <samp>devenv-4-iom</samp> by very simple examples. You will setup an IOM cluster. You will be able to browse through the GUI of IOM. You will take a look on access-log messages. You will solve a very simple development task: execute a SQL-file. And finally you will destroy the IOM cluster again.
        </p><p>
          Once you are able to setup IOM with <samp>devenv-4-iom</samp> and have an insight into its main ideas, it should become easy for you to find out more by yourself, to become able to solve the development tasks you need to solve.
        </p>
        
        <h3 id="first-steps--config">Configuration</h3>
        <p>
          If you read this text, you have already sucessfully created the configuration file <samp>${ENV_DIR}/${CONFIG_FILE}</samp>. If this is a new configuration, it's filled with default settings defined by <samp>devenv-4-iom</samp>. The most important settings are the <samp>*_IMAGE</samp> properties, since they are defining what will be executed by <samp>devenv-4-iom</samp>. By defining the images, you can for example control to run a specific project, a standard IOM product without any customizations, the IOM product, which is currently in develepoment or even containers of the IOM product or project, you have built by yourself on your local computer.
        </p><p>
          The default settings are using the pure IOM product, which is currently in development. For the first steps, there is no need to change this settings. The Docker registry used by default seetings requires login. Hence you have to login into the registry. Additionally you should check, if you are able to access the Docker images, which are set in config-file. To do so, try to pull the images manually in a shell.
        </p><p>
          Open the config-file <samp>${ENV_DIR}/${CONFIG_FILE}</samp>, copy the values of the <samp>*_IMAGE</samp> properties and use them to pull the Docker images manually, just as shown in the box below.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# login into Docker registry
docker login docker-build.rnd.intershop.de

# pull images from registry
docker pull postgres:11
docker pull mailhog/mailhog
docker pull docker-build.rnd.intershop.de/intershop/iom-dbaccount:1.0.0.0-SNAPSHOT
docker pull docker-build.rnd.intershop.de/intershop/iom-dbinit:2.17.0.0-SNAPSHOT
docker pull docker-build.rnd.intershop.de/intershop/iom-app:2.17.0.0-SNAPSHOT
        </div></code></pre>
        
        <h3 id="first-steps--create">Create IOM cluster</h3>
        <p>
          For IOM to run in Kubernetes, several (sub-)systems are needed:
          <ul>
            <li>A kubernetes namespace, to isolate different installations from each other</li>
            <li>A persistent storage to be used by the database</li>
            <li>A PostgreSQL database, which is using persistent storage.</li>
            <li>A mail-server, to receive mails, sent by IOM. The mail-server used by <samp>devenv-4-iom</samp> allows you to access the received mails by a GUI and by a REST interface</li>
            <li>The IOM sever itself</li>
          </ul>
          <samp>devenv-4-iom</samp> provides a very easy way to setup all these systems and makes them work together. Just create the cluster by executing the following command:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh create cluster
        </div></code></pre>
        <p>
          The process of cluster creation will take some minutes (between 3 and 10, depending on your hardware). During this time we should take a look at the statuses of the (sub-)systems. 
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# get status of storage
${ENV_DIR}/devenv-cli.sh info storage

# get info about mail-server
${ENV_DIR}/devenv-cli.sh info mailserver

# get info about postgres-server
${ENV_DIR}/devenv-cli.sh info postgres

# get info about IOM server
${ENV_DIR}/devenv-cli.sh info iom
        </div></code></pre>
        <p>
          Mail-server and PostgreSQL-server are starting very quickly. The output of the according <samp>'info'</samp> commands contain a section 'Kubernetes', which shows the state. For these two systems, the state should be <samp>running</samp> even after a short after creating the cluster. The box below shows an example output: 
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh info postgres
...
--------------------------------------------------------------------------------
Kubernetes:
===========
namespace:                  21700snapshot
KEEP_DATABASE_DATA:         true
NAME       READY   STATUS    RESTARTS   AGE
postgres   1/1     Running   0          8s
--------------------------------------------------------------------------------
...
        </div></code></pre>
        <p>
          The start of IOM will take much longer. You can use the <samp>'info iom'</samp> command, to check the state periodically. After some minutes IOM should be in running state too. The according output should look like this:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh info iom
...
--------------------------------------------------------------------------------
Kubernetes:
===========
namespace:                  21700snapshot
NAME                   READY   STATUS    RESTARTS   AGE
iom-6c587ddd87-d7qb2   1/1     Running   0          5m5s
--------------------------------------------------------------------------------
...           
        </div></code></pre>
        
        <h3 id="first-steps--use">Access IOM GUI</h3>
        <p>
          Now IOM is running and we can access its GUI. The <samp>'info iom'</samp> command provides the according information about the URL you have to use. The following box shows an example:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh info iom
...
--------------------------------------------------------------------------------
Links:
======
OMT:                        http://Andreas-Herolds-MacBook.local:8080/omt
DBDoc:                      http://Andreas-Herolds-MacBook.local:8080/dbdoc/
Wildfly (admin:admin):      http://Andreas-Herolds-MacBook.local:9990/console
--------------------------------------------------------------------------------
...
        </div></code></pre>
        <p>
          Just copy the <samp>OMT</samp> link into your browser and open the page. You should now see the login-screen. The combination of <samp>admin:!InterShop00!</samp> should give you access to IOM.
        </p>
        
        <h3 id="first-steps--logs">View access logs</h3>
        <p>
          Now IOM is running and we are able to use it in the browser. Now it's time to look how to access some log-messages. Since we are able to browse in IOM, the access-log message will give us a good example. The following command prints access-log entries and also waits for new entries.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# press ^C to stop printing logs
${ENV_DIR}/devenv-cli.sh log access all -f
...
{
  "eventSource": "web-access",
  "hostName": "default-host",
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-d7qb2",
  "logVersion": "1.0",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "appName": "iom-app",
  "logType": "access",
  "configName": "ci",
  "bytesSent": 33586,
  "dateTime": "2019-12-17T14:12:36153Z",
  "localIp": "10.1.1.210",
  "localPort": 8080,
  "remoteHost": "192.168.65.3",
  "remoteUser": null,
  "requestHeaderReferer": "http://andreas-herolds-macbook.local:8080/omt/app/order/landingpage",
  "requestHeaderUser-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.4 Safari/605.1.15",
  "requestHeaderHost": "andreas-herolds-macbook.local:8080",
  "requestHeaderCookie": "OMS_IDENTITY=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJPTVQiLCJleHAiOjE1NzY2NzgzNDksImlhdCI6MTU3NjU5MTk0OSwic3ViIjoiQXV0aGVudGljYXRpb24iLCJ1c2VyIjoiYWRtaW4ifQ.c5XuyKZM1FbrwRRGTg4CqaXog3WN6K-kuSTYSp6WEio; SessionKey=11a11a64-9ee9-44cc-bd4d-7ffbb1e12fac; JSESSIONID=k_AxMo_ElpYnjaTTLAkOeFoF3LF_W6VW67PpYcG1.iom-6c587ddd87-d7qb2; org.springframework.web.servlet.i18n.CookieLocaleResolver.LOCALE=en",
  "requestLine": "GET /omt/WEB-INF/views/widgets/shortOrderSearchContainer.jsp?_=1576591952608 HTTP/1.1",
  "requestProtocol": "HTTP/1.1",
  "requestScheme": "http",
  "responseCode": 200,
  "responseHeaderContent-Type": "text/html;charset=utf-8",
  "responseHeaderSet-Cookie": null,
  "responseTime": 3420
}
{
  "eventSource": "web-access",
  "hostName": "default-host",
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-d7qb2",
  "logVersion": "1.0",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "appName": "iom-app",
  "logType": "access",
  "configName": "ci",
  "bytesSent": 472,
  "dateTime": "2019-12-17T14:12:41026Z",
  "localIp": "10.1.1.210",
  "localPort": 8080,
  "remoteHost": "10.1.0.1",
  "remoteUser": null,
  "requestHeaderReferer": null,
  "requestHeaderUser-Agent": "kube-probe/1.14",
  "requestHeaderHost": "10.1.1.210:8080",
  "requestHeaderCookie": null,
  "requestLine": "GET /monitoring/services/health/status HTTP/1.1",
  "requestProtocol": "HTTP/1.1",
  "requestScheme": "http",
  "responseCode": 200,
  "responseHeaderContent-Type": "application/json",
  "responseHeaderSet-Cookie": null,
  "responseTime": 2
}
...
        </div></code></pre>
        
        <h3 id="first-steps--sql">Execute SQL-file</h3>
        <p>
          The execution of an SQL-file is a very simple example of a development task. To execute this task, we have first to create a SQL-file. Just create a file, having the extension <samp>.sql</samp> and copy the following content into it:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
select * from "CountryDefDO";         
        </div></code></pre>
        <P>
          You have to make sure, that the file can be shared with Docker Desktop. Just check the settings of Docker Desktop. Go to <samp>Docker Desktop > Preferences > File Sharing</samp> and check if the file is located in a shared directory. If not, move it to a shared directory (or change the preferences, but this requires a restart of Docker Desktop). For more information about Sharing with Docker Desktop, please have a look at <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">this document</a>.
        </p><p>
          The following box shows an example, where the file is named <samp>/Users/andreas/test.sql</samp>. If you have <samp>jq</samp> installed, you can pipe the output through <samp>jq</samp> to get pretty-printed messages.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply sql-script /Users/andreas/test.sql 
{ "tenant":"Intershop", "environment":"devenv4iom", "logHost":"Andreas-Herolds-MacBook.local", "logVersion":"1.0", "appName":"devenv4iom", "appVersion":"1.0.0.0-SNAPSHOT", "logType":"script", "timestamp":"2019-12-17T14:42:23Z", "level":"INFO", "message":"apply-sql-scripts: job successfully started", "processName":"devenv-cli.sh", "additionalInfo":"job.batch/apply-sql-job created", "configName":"ci" }
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"apply-sql-job-kqcnh","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-17T14:42:24+00:00","level":"INFO","processName":"apply_sql.sh","message":"Properties","configName":"ci","additionalInfo":"--src=/tmp/sql-dir-volume/test.sql\nOMS_DB_HOST=postgres-service\nOMS_DB_PORT=5432\nOMS_DB_NAME=oms_db\nOMS_DB_USER=oms_user\nOMS_DB_PASS=oms_pw\nOMS_USER_CONNECTION_SUFFIX=\nOMS_LOGLEVEL_SCRIPTS=INFO\nTENANT=Intershop\nENVIRONMENT=2.17.0.0-SNAPSHOT"}
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"apply-sql-job-kqcnh","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-17T14:42:24+00:00","level":"INFO","processName":"apply_sql.sh","message":"processing file '/tmp/sql-dir-volume/test.sql'","configName":"ci"}
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"apply-sql-job-kqcnh","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-17T14:42:24+00:00","level":"INFO","processName":"apply_sql.sh","message":"success","configName":"ci"}
{ "tenant":"Intershop", "environment":"devenv4iom", "logHost":"Andreas-Herolds-MacBook.local", "logVersion":"1.0", "appName":"devenv4iom", "appVersion":"1.0.0.0-SNAPSHOT", "logType":"script", "timestamp":"2019-12-17T14:42:29Z", "level":"INFO", "message":"apply-sql-scripts: successfully deleted job", "processName":"devenv-cli.sh", "additionalInfo":"job.batch \"apply-sql-job\" deleted", "configName":"ci" }
        </div></code></pre>
        <p>
          You can also interactively use <samp>psql</samp> to communicate with PostgreSQL-server. Just use the command <samp>'info postgres'</samp> to get the according command line.
        </p>
        
        <h3 id="first-steps--delete">Delete IOM cluster</h3>
        <p>
          Now it comes the time, that we have to clean up the environment. To do so, we have to execute two steps:
          <ul>
            <li>Delete IOM cluster.</li>
            <li>Delete persistent storage.</li>
          </ul>
          In difference to the cluster-creation step, which created the persistent storage too, the cluster-delete step is not touching persistent storage. This way, you could simply create a new cluster, that is using the old database data. If we now want to delete persistent storage, we have to do this explicitely by executing the according command.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete cluster       
${ENV_DIR}/devenv-cli.sh delete storage
        </div></code></pre>
        <p>
          We have now used <samp>devenv-cli.sh</samp> a lot. If you want to explore all features of this program, just call it with argument <samp>-h</samp>.
        </p>
        
        <h2 id="configurations">Configuration</h2>

        <h3 id="configurations--devenv4iom">Update devenv-4-iom</h3>
        <p>
          To update devenv-4-iom you have to process the following steps:
          <ul>
            <li>TODO: where to download</li>
            <li>TODO: release notes (link or colapseable box)</li>
            <li>TODO: extract to ${PROJECT_PATH}</li>
            <li>The step <a href="#configurations--update">'Update config after updating devenv-4-iom'</a> has to be processed for each configuration</li>
          </ul>
        </p>
        
        <h3 id="configurations--update">Update config-directory after updating devenv-4-iom</h3>
        <p>
          After updating devenv-4-iom, the content of current config directory has to be updated too. To do so, you have to update the command client itself and in a second step all other files.
        </p>
        <p>
          You can run <samp>'update all'</samp> so often you want. Since HTML documentation also references variables from configuration, it's recommended to update it after each configuration change.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Update devenv-cli.sh files in ${ENV_DIR}
"${ENV_DIR}/devenv-cli.sh" update cli

# Update all remaining files in ${ENV_DIR}
"${ENV_DIR}/devenv-cli.sh" update all
        </div></code></pre>     

        <h3 id="configurations--reset-config">Reset current configuration</h3>
        <p>
          If you want to reset the whole configuration, simply delete all entries from <samp>${ENV_DIR}/config.properties</samp>, but do not delete the file itself. Before doing this, it's recommended to make a backup of the old configuration.
        </p><p>
          To reset only parts of the configuration, just delete the according entries.
        </p><p>
          Now you can run <samp>'update config'</samp>, to recreate <samp>config.properties</samp>. Except you know exactly what you do, it's recommended to delete the IOM cluster before and and create it again afterwards.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Delete IOM cluster
"${ENV_DIR}/devenv-cli.sh" delete cluster
              
# Update config.properties in ${ENV_DIR}
"${ENV_DIR}/devenv-cli.sh" update config
# now check the reseted entries and change them to your needs

# Create IOM cluster again
"${ENV_DIR}/devenv-cli.sh" create cluster
        </div></code></pre>   
        
        <h3 id="configurations--info">Getting info about components</h3>
        <p>
          Each component (iom, postgres, mailserver, storage) has a lot of information to provide, e.g.:
        </p>
        <ul>
          <li>Links to access services</li>
          <li>Public ports</li>
          <li>Configuration settings</li>
          <li>Useful commands, etc.</li>
        </ul>
        <p>
          The command line client of devenv-4-iom provides a very simple interface to get these information:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Get info about IOM
"${ENV_DIR}/devenv-cli.sh" info iom

# Get info about mail-server
"${ENV_DIR}/devenv-cli.sh" info mailserver

# Get info about PostgreSQL
"${ENV_DIR}/devenv-cli.sh" info postgres

# Get info about Storage
"${ENV_DIR}/devenv-cli.sh" info storage
        </div></code></pre> 

        <h3 id="configurations--add-config">Create an new configuration/instance</h3>
        <p>
          You can have many different configurations in parallel. All these configurations are stored in sub-directories of <samp>${ENV_BASE_DIR}</samp>.
        </p><p>
          The name of each sub-directory has to be identical to the ID of the according configuration. Each sub-directory contains configuration (<samp>config.properties</samp>), the command line client (<samp>devenv-cli.sh</samp>) and documentation (<samp>index.html</samp>), specific for this instance of IOM development environment.
        </p><p>
          The following code block, shows how to create and initialize such a sub-directory of a new configuration. You just need to set ID to the right value before executing the code.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
################################################################################
# Adapt the following variable!
# This will become the name of your new configuration
################################################################################
ID=2.16.0.0-SNAPSHOT

( cd "${ENV_BASE_DIR}" &&
  # create the new configuration file with default settings
  mkdir -p "$ID" &&
  ID=$ID ENV_DIR="$(pwd)/$ID" \
    "${PROJECT_PATH}/scripts/template_engine.sh" \
    "${PROJECT_PATH}/templates/config.properties.template" > \
    "$ID/${CONFIG_FILE}" &&

  # create the command line interface
  "${PROJECT_PATH}/scripts/template_engine.sh" \
    "${PROJECT_PATH}/templates/devenv-cli.sh.template" \
    "$ID/${CONFIG_FILE}" > \
    "$ID/devenv-cli.sh" &&
    chmod +x "$ID/devenv-cli.sh" &&
 
  # create remaining files
  "./$ID/devenv-cli.sh" update all &&
  echo &&
  echo "open '$(pwd)/$ID/index.html' in your browser for further instructions" &&
  echo
)
        </div></code></pre> 
        
        <h3 id="configurations--parallel-instances">Parallel instances of devenv-4-iom environments</h3>
        <p>
          Running different IOM installations within devenv-4-iom is not a problem, if they are not running at the same time. Just run <samp>'delete cluster'</samp> on one installation before run <samp>'create cluster'</samp> on another.
        </p><p>
          Different IOM installations are perfectly isolated by different namespaces on Kubernetes level. But when it comes on operating system level of your host machine, the ports required to access the IOM installation from outside, are colliding.
        </p><p>
          Devenv-4-iom provides a simple mechanism to avoid port collisions. The configuration variable <samp>INDEX</samp> controls the port usage, when providing services on OS level. Just make sure, that every IOM configuration uses a different value of <samp>INDEX</samp>. After each change of <samp>INDEX</samp> you have to delete and create the cluster.
        </p>

        <h3 id="configurations--add-config">Delete current configuration/instance</h3>
        <p>
          The configuration directory (<samp>${ENV_DIR}</samp>) does not need much space on disk. You should delete it only, if you are really sure, that you will never need again this IOM development instance. Of course, you can delete this directory too, but first you have to <samp>'delete cluster'</samp> and <samp>'delete storage'</samp> to be able to remove the assigned resources. Addtionally, it's recommended to delete unused Docker images too.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Delete IOM cluster
"${ENV_DIR}/devenv-cli.sh" delete cluster

# Delete storage
"${ENV_DIR}/devenv-cli.sh" delete storage

# Do this only, if you really sure
rm -fr "${ENV_DIR}"

# Clean up unused Docker images (cleans up all unused images, not only the ones belonging to current configuration)
docker system prune -a -f
        </div></code></pre> 
        
        <!--
            ############# Operational commands ###############
          -->
        
        <h2 id="setup">Operations</h2>
        
        <h3 id="operations--create-cluster">Create whole IOM cluster</h3>

        <p>Creation of whole IOM cluster consists of several steps. These are:</p>
        <ol>
          <li><a href="#operations--create-storage">Create local Docker volume</a> (not required, if <samp>KEEP_DATABASE_DATA</samp> is set to <samp>false</samp>)</li>
          <li><a href="#operations--create-namespace">Create namespace</a></li>
          <li><a href="#operations--create-mailserver">Create mailserver</a></li>
          <li><a href="#operations--create-postgres">Create postgres database</a> (not required, if an external database is used, which is the case if <samp>PGHOST</samp> is set)</li>
          <li><a href="#operations--create-iom">Create IOM</a></li>
        </ol>
        <p>
          The command line client provides all these commands separately, but it also provides the shortcut <samp>'create cluster'</samp>, which does all these steps at once.
        </p>
        <p>
          Depending on the Docker registry you are using, it might be required to login at the registry before you are able to create IOM as part of the cluster. If the Docker registry needs you to be logged in, just login into it first.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# optional: only if required by registry. You have to adapt this command to the
# registry used by *_IMAGE variables of your current configuration.
docker login docker-build.rnd.intershop.de

# now create the cluster
"${ENV_DIR}/devenv-cli.sh" create cluster
        </div></code></pre>

        <h3 id="operations--delete-cluster">Delete whole IOM cluster</h3>

        <p>Removing the whole IOM development environment consists of several steps. These are:</p>
        <ol>
          <li><a href="#operations--delete-iom">Delete IOM</a></li>
          <li><a href="#operations--delete-postgres">Delete postgres database</a> (not required, if an external database is used, which is the case if <samp>PGHOST</samp> is set)</li> 
          <li><a href="#operations--delete-mailserver">Delete mailserver</a></li>
          <li><a href="#operations--delete-namespace">Delete namespace</a></li>
        </ol>
        <p>
          All these steps are provided as single commands by devenv-4ioms command line client. But the command line client also provides the shortcut <samp>'delete cluster'</samp>, which does all these operations at once.
        </p><p>
          Please pay attention, that persistent storage will never be deleted by <samp>'delete cluster'</samp> command.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete cluster
        </div></code></pre>

        <h3 id="operations--create-namespace">Create namespace</h3>
        <p>Namespace is required, to isolate the devenv-4-iom from other resources and from resources of other configurations. The following command creates a namespace, based on the ID you have specified in your properties.</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh create namespace
        </div></code></pre>

        <h3 id="operations--delete-namespace">Delete namespace</h3>
        <p>The following command deletes the namespace and all resouces assigned to this namespace.</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete namespace
        </div></code></pre>

        <h3 id="operations--create-mailserver">Create mailserver</h3>
        <p>The following command creates a mailserver, that is used to receive mails from IOM.</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh create mailserver
        </div></code></pre>

        <h3 id="operations--delete-mailserver">Delete mailserver</h3>
        <p>The following command deletes the mailserver.</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete mailserver
        </div></code></pre>

        <h3 id="operations--create-storage">Create local Docker volume</h3>
        <p>The following command creates a local Docker volume to be used to keep database data. This command has effect only, if <samp>KEEP_DATABASE_DATA</samp> is set to <samp>true</samp></p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh create storage
        </div></code></pre>

        <h3 id="operations--delete-storage">Delete local Docker volume</h3>
        <div class="alert alert-warning" role="alert">
          <strong>Note!</strong>
          <p>If you would like to remove the database data, you just have to remove the persistent database data volume with the following command. This command has effect only, if a local Docker volume was created before (<samp>KEEP_DATABASE_DATA</samp> is set to <samp>true</samp>)</p><br>
          <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete storage
          </div></code></pre>
        </div>

        <h3 id="operations--create-postgres">Create postgres database</h3>
        <p>The following command creates the postgres database. This command has effect only, if an internal database server is used (when <samp>PGHOST</samp> is not set).</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh create postgres
        </div></code></pre>

        <h3 id="operations--delete-postgres">Delete postgres database</h3>
        <p>The following command deletes the postgres database. This command has effect only, if an internal database was created before (when <samp>PGHOST</samp> is not set)</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete postgres
        </div></code></pre>

        <h3 id="operations--create-iom">Create IOM</h3>
        <p>
          The following command creates the IOM application server.
        </p><p>
          Depending on the Docker registry you are using, it might be required to login at the registry before you are able to create IOM as part of the cluster. If the Docker registry needs you to be logged in, just login into it first.
        </p>
        
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# optional: only if required by registry. You have to adapt this command to the
# registry used by *_IMAGE variables of your current configuration.
docker login docker-build.rnd.intershop.de

# now create IOM
${ENV_DIR}/devenv-cli.sh create iom
        </div></code></pre>

        <h3 id="operations--delete-iom">Delete IOM</h3>
        <p>The following command deletes the IOM application server.</p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh delete iom
        </div></code></pre>

        <!--
            ############# development process ###############
          -->
        
        <h2 id="development">Development process</h2>

        <h3 id="development--deployment-gui">Deployment of custom built artifacts using the Wildfly Admin Console</h3>
        <p>
          Using the <a href="http://${HOST_IOM}:${PORT_WILDFLY_SERVICE}/console/index.html#deployments" target="_blank">Wildfly Admin Console (admin:admin)</a> is the easiest way to add or update deployments. The deployment process is simply triggered by Drag & Drop.
        </p><p>
          In difference to <a href="#development--deployment-cli">Deployment of custom built artifacts using the command line interface</a>, deployments added/updated this way, will not survive a restart of the IOM pod.
        </p>
        
        <h3 id="development--deployment-cli">Deployment of custom built artifacts using cli</h3>
        <p>
          If you want to deploy custom built artifacts, using the command line interfaces, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_APPS_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
            <li>After changing <samp>CUSTOM_APPS_DIR</samp>, the IOM application server needs to be restarted:</li>
            <ol>
              <li><a href="#operations--delete-iom">Delete IOM</a></li>
              <li><a href="#operations--create-iom">Create IOM</a></li>
            </ol>
          </ul>
          Once you have configured your developer VM this way, your custom built artifacts are deployed right at the start of IOM. To update/add deployments in a running developer VM, you have the following possibilities:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# redeploy omt selectively by adding one more parameter: a regular-expression to select the artifact to be redeployed
${ENV_DIR}/devenv-cli.sh apply deployment omt

# redeploy all
${ENV_DIR}/devenv-cli.sh apply deployment
        </div></code></pre>
        <p>
          Of course, you can combine both methods of deploying custom built artifacts, to get the best out of both methods. If you set <samp>CUSTOM_APPS_DIR</samp> and make sure the according directory contains your custom built artifacts, your developer VM will always use these artifacts, even right after start of IOM. Additionally you can use <a href="http://${HOST_IOM}:${PORT_WILDFLY_SERVICE}/console/index.html#deployments" target="_blank">Wildfly Admin Console (admin:admin)</a> to update/add deployments during runtime.
        </p>
          
        <h3 id="development--apply-mail-templates">Roll out custom mail templates</h3>
        <p>
          If you want to roll out custom mail templates in a running developer VM, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_TEMPLATES_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
            <li>After changing <samp>CUSTOM_TEMPLATES_DIR</samp>, the IOM application server needs to be restarted:</li>
            <ol>
              <li><a href="#operations--delete-iom">Delete IOM</a></li>
              <li><a href="#operations--create-iom">Create IOM</a></li>
            </ol>
          </ul>
          Once you have configured your developer VM this way, you can apply custom mail templates by the following command:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply mail-templates
        </div></code></pre>
        <p>
          If <samp>CUSTOM_TEMPLATES_DIR</samp> is configured, the templates are also copied when starting IOM.
        </p>

        <h3 id="development--apply-xsl-templates">Roll out custom xsl templates</h3>
        <p>
          If you want to roll out custom xsl templates in a running developer VM, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_XSLT_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
            <li>After changing <samp>CUSTOM_XSLT_DIR</samp>, the IOM application server has to be restarted:</li>
             <ol>
              <li><a href="#operations--delete-iom">Delete IOM</a></li>
              <li><a href="#operations--create-iom">Create IOM</a></li>
             </ol>
          </ul>
          Once you have configured your developer VM this way, you can apply custom xsl templates by the following command:
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply xsl-templates
        </div></code></pre>
        <p>
          if <samp>CUSTOM_XSLT_DIR</samp> is configured, the templates are also copied when starting IOM.
        </p>

        <h3 id="development--apply-sql-scripts">Apply sql scripts</h3>
        <p>
          The docker-image defined by <samp>IOM_DBINIT_IMAGE</samp> contains all the necessary tools to apply sql-scripts to the IOM database. Devenv-4-iom enables you to use these tools as easy as possible. Therefore it provides a Kubernetes job (<samp>apply-sql-job</samp>), that applies sql-file(s) to the IOM database. Creation and deletion of job and access to logs is provided by command <samp>'apply sql-scripts'</samp> of command line interface.
        </p><p>
          There are two different modes, that can be used.
          <ul>
            <li>If a directory is passed to the job, all sql-files found in this directory are processed in numerical order, starting with the smallest one. Sub-directories are not scanned for sql-files.</li>
            <li>If a file is passed to the job, only this file will be executed.</li>
          </ul>
          The information about the sql-file or -directory is passed as third parameter to the command line client. The box below shows an example, that executes all sql-scripts found in <samp>oms.tests/tc_stored_procedures</samp>. 
        </p><p>
          The logs are printed in json format. Verbosity can be controlled by configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# adapt third paramater according your needs
${ENV_DIR}/devenv-cli.sh apply sql-scripts ${IOM_APP_SRC_DIR}/oms.tests/tc_stored_procedures
        </div></code></pre>
        
        <h3 id="development--apply-dbmigrate">Apply dbmigrate scripts</h3>
        <p>
          To develop and test a single or a couple of sql-scripts (which can be migration scripts too), the developer task <em><a href="#development--apply-sql-scripts">Apply sql scripts</a></em> is the first choice. But at some point of development, the dbmigrate process as a whole has to be tested too. The dbmigrate process is somewhat more complex than simply applying sql-scripts from a directory. It first loads stored procedures from directory <samp>stored_procedures</samp> and then it applies the migrations scripts found in directory <samp>migrations</samp>. The order of execution is controlled by the names of sub-directories within <samp>migrations</samp> and the naming of the migration scripts itself (numerically sorted, smallest first).
        </p><p>
          The <samp>IOM_DBINIT_IMAGE</samp> contains a shell script, that is applying the migration scripts, which are delivered along with the docker image. The developer task <em><a href="#development--apply-dbmigrate">Apply dbmigrate scripts</a></em> enables you to use this dbmigrate script along with the migration scripts located at <samp>CUSTOM_DBMIGRATE_DIR</samp>. Hence, if you want to roll out custom dbmigrate scripts, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_DBMIGRATE_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
          </ul>
        </p><p>
          You can and should have an eye on the logs created by the migration process. These logs are printed in json format. Verbosity can be controlled by configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply dbmigrate
        </div></code></pre>
        <p>
          If <samp>CUSTOM_DBMIGRATE_DIR</samp> is configured, the custom dbmigrate scripts are also applied when starting IOM.
        </p>
        
        <h3 id="development--apply-sql-config">Apply sql configuration scripts</h3>
        <p>
          Scripts for sql-configuration are simple sql-scripts, which can be easily developed and tested with the help of the developer task <a href="#development--apply-sql-scripts">Apply sql scripts</a>. But sql-configuration in CaaS project context is more complex. E.g. the scripts are executed depending on the currently activated environment. In order to enable you to test sql-configuration scripts exactly in the same context as in real IOM installation, the developer task <a href="#development--apply-sql-config">Apply sql configuration scripts</a> is provided.
        </p><p>
          To be able to roll out complete sql configurations, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_SQLCONF_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
            <li>set variable <samp>CAAS_ENV_NAME</samp> in your config file to the environment you want to test.</li>
          </ul>
        </p><p>
          You should have an eye on the logs created by the configuration process. These logs are printed in json format. Verbosity can be controlled by configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply sql-config
        </div></code></pre>
        <p>
          If <samp>CUSTOM_SQLCONFIG_DIR</samp> is configured, the custom sql configuration is also applied when starting IOM.
        </p>

        <h3 id="development--apply-json-config">Apply json configuration scripts</h3>
        <p>
          Json configuration of IOM is not publicly available. There exists no task to support development of single json configuration scripts. Additionally the current implementation of json configuration does not use the concept of environments (configuration variable <samp>CAAS_ENV_NAME</samp>). The current developer task <a href="#development--apply-json-config">Apply json configuration scripts</a> is able to apply complete json configurations exactly in the same context as in a real IOM installation.
        </p><p>
          To be able to roll out json configurations, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_JSONCONF_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.</li>
          </ul>
        </p><p>
          You should have an eye on the logs created by the configuration process. These logs are printed in json format. Verbosity can be controlled by configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply json-config
        </div></code></pre>
        <p>
          If <samp>CUSTOM_JSONCONFIG_DIR</samp> is configured, the custom json configuration is also applied when starting IOM.
        </p>

        <h3 id="development--dump-load">Load custom dump</h3>
        <p>
          When starting IOM and the conneted database is empty, the dbinit container is loading the initial dump. Devenv-4-iom gives you the possibility to load a custom dump during this process. This custom dump will be treated exactly as any other dump, which is part of the docker image. If you want to load a custom dump, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_DUMPS_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>. The dump you want to load, has to be located within this directory. To be recognized as a dump, it has to have the extension <samp>.sql.gz</samp>. If the directory contains more than one dump-file, the script of the dbinit container selects the one, which's name is numerically largest. You can check this with following command: <samp>ls *.sql.gz | sort -nr | head -n 1</samp></li>
            <li>The custom dump can be loaded only, if the database is empty. The <samp>'dump load'</samp> command of the command line client executes all the necessary steps to restart IOM with an empty database, but only if NOT an external database is used (only, if <samp>PGHOST</samp> is not set)</li>
            <ul>
              <li><a href="#operations--delete-iom">Delete IOM</a></li>
              <li><a href="#operations--delete-postgres">Delete postgres database</a></li>
              <li><a href="#operations--delete-storage">Remove local Docker volume</a> Required only, if <samp>KEEP_DATABASE_DATA</samp> is set to <samp>true</samp>.</li>
              <li><a href="#operations--create-storage">Create local Docker volume</a> Required only, if <samp>KEEP_DATABASE_DATA</samp> is set to <samp>true</samp>.</li>
              <li><a href="#operations--create-postgres">Create postgres database</a></li>
              <li><a href="#operations--create-iom">Create IOM</a></li>
            </ul>
            <li>The custom dump can be loaded only, if the database is empty. When you are using an external database (<samp>PGHOST</samp> is set), the steps listed above will not have any effect. You have to care yourself to purge the external database and to recreate the IOM installation.</li>
          </ul>
        </p><p>
          You should inspect the logs created, when running the dbinit container. Was really the dump loaded, you think it was? The logs of dbinit process are printed in json format. Verbosity can be controlled by configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh dump load
        </div></code></pre>

        <h3 id="development--dump-create">Create dump</h3>
        <p>
          Devenv-4-iom provides a job to create a dump of the IOM database. This job uses variable <samp>CUSTOM_DUMPS_DIR</samp> too. It writes the dumps to this directory. The created dumps will use the following naming pattern: <samp>OmsDump.<em>year-month-day.hour.minute.second-hostname</em>.sql.gz</samp>. To create dumps, you have to:
          <ul>
            <li>set variable <samp>CUSTOM_DUMPS_DIR</samp> in your config file and make sure, that the <a href="https://blogs.msdn.microsoft.com/stevelasker/2016/06/14/configuring-docker-for-windows-volumes/" target="_blank">directory is shared in Docker Desktop</a>.
          </ul>
        </p><p>
          You should check the output of the dump-job. The logs of the job a printed in json format. Verbosity can be controlled by the configuration variable <samp>OMS_LOGLEVEL_SCRIPTS</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh dump create
        </div></code></pre>
        <p>
          If <samp>CUSTOM_DUMP_DIR</samp> is configured, the newest custom dump will be loaded, when starting IOM with an empty database (according to the <a href="#development--load-dump">load-rules</a>).
        </p>
        
        <h3 id="development--access-emails">Access E-Mails</h3>
        <p>To develop e-mail templates, to test that emails are successfully sent by business processes and in other use cases, it is necessary to access the e-mails. The information about links to mail-server UI and REST interface is given by command <samp>'info mailserver'</samp>, provided by command line interface.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh info mailserver
        </div></code></pre>

        <h3 id="development--testing">Testing</h3>

<h4 id="provide-ws-properties">Apply test-specific stored procedures</h4>
        <p>
          To apply stored procedures, just use the command <a href="#development--apply-sql"><samp>'apply sql-scripts'</samp></a> and set the parameter to the directory containing the stored procedures, required for testing.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
${ENV_DIR}/devenv-cli.sh apply sql-scripts ${IOM_APP_SRC_DIR}/oms.tests/tc_stored_procedures
        </div></code></pre>
        
        <h4 id="run-tests">Run single geb-tests or a group of geb-tests</h4>
        <p> To run a single test, just use the the feature name or a substring of it. E.g:</p>

        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Go to the oms.tests directory in your oms source directory
cd ${IOM_APP_SRC_DIR}/oms.tests

# Run a single geb test
./gradlew gebTest -Pgeb.propFile=${ENV_DIR}/geb.properties --tests="IOM: Role Assignment Management: admin_Oms_1 lists users for role-assignment"

# Run a group of geb tests
./gradlew gebTest -Pgeb.propFile=${ENV_DIR}/geb.properties --tests="*admin_Oms_1 lists users for role-assignment*"
        </div></code></pre>

        <h4 id="run-tests">Run single ws-tests or a group of ws-tests</h4>
        <p> To run a single test, just use the the feature name or a substring of it. E.g:</p>

          <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Go to the oms.tests directory in your oms source directory
cd ${IOM_APP_SRC_DIR}/oms.tests

# Run a single ws test
./gradlew wsTest -Pws.propFile=${ENV_DIR}/ws.properties --tests="IOM-7421-1: OrderService v1.2: Create an order with one position and billing address == shipping address"

# Run a group of ws tests
./gradlew wsTest -Pws.propFile=${ENV_DIR}/ws.properties --tests="*OrderService v1.2: Create an order with one position and billing address*"
          </div></code></pre>

        <h4 id="run-all-tests">Run all All tests of a specification</h4>
        <p> To run all tests of a specification, just use the the name of the specification. E.g:</p>
        
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Go to the oms.tests directory in your oms source directory
cd ${IOM_APP_SRC_DIR}/oms.tests

# Run all tests of a geb test specification
./gradlew gebTest -Pgeb.propFile=${ENV_DIR}/geb.properties --tests="*RoleAssignmentManagementListUsersSpec*"

# Run all tests of a ws test specification
./gradlew wsTest -Pws.propFile=${ENV_DIR}/ws.properties --tests="*ReverseServiceSpec*"
        </div></code></pre>

        <h4 id="run-test-group">Run all tests of a group of specifications (e.g. user management, role management)</h4>
        <p> To run all tests of a group of specifications, just use the name of the uses package. E.g:</p>

        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Go to the oms.tests directory in your oms source directory
cd ${IOM_APP_SRC_DIR}/oms.tests

# Run all tests of a specification group
./gradlew gebTest -Pgeb.propFile=${ENV_DIR}/geb.properties --tests="*com.intershop.oms.tests.roleassignment*"
        </div></code></pre>

        <h4 id="run-test-group">Run SOAP tests</h4>
        <p> To run all soap tests just use the following code:</p>

        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Go to the oms.soap.tests directory in your oms source directory
cd ${IOM_APP_SRC_DIR}/oms.soap.tests

# Run all soap tests
mvn -Dhost=${HOST_IOM}:${PORT_IOM_SERVICE} clean test
        </div></code></pre>

        <h2 id="log-messages">Log-messages</h2>
        <h3 id="log-messages--jq">jq - command-line JSON processor</h3>
        <p>
          <samp><a href="https://stedolan.github.io/jq/" target="_blank">jq</a></samp> is a command line tool to work with json messages. Since all messages, created by <samp>devenv-4-iom</samp> and <samp>IOM</samp>, are json messages, it is a very useful tool. <samp><a href="https://stedolan.github.io/jq/" target="_blank">jq</a></samp> is not included in <samp>devenv-4-iom</samp>. <samp>devenv-4-iom</samp> does not depend on it (except the <samp>'log *'</samp> command), but it's strongly recommended that you install <samp><a href="https://stedolan.github.io/jq/" target="_blank">jq</a></samp> too.
        </p><p>
          The most important features used in context of <samp>devenv-4-iom</samp> are formatting and filtering. The following box shows some examples of these use cases. These examples are not intended to be used as they are. They should only give you an impression about <samp><a href="https://stedolan.github.io/jq/" target="_blank">jq</a></samp> and should animate you, to dig deeper by yourself.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# Print raw json messages
cmd_producing_json
...
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"iom-6c587ddd87-42k4f","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-13T13:35:45+00:00","level":"INFO","processName":"apply_json_config.sh","message":"processing file '/opt/caas-config/json-config/config/P_shopTX/G_Invoicing_and_Documents/060_InvoicingNoConfigDO/InvoicingNoConfigDO_test_shop_TX.iombc'","configName":"ci"}
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"iom-6c587ddd87-42k4f","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-13T13:35:45+00:00","level":"INFO","processName":"apply_json_config.sh","message":"processing file '/opt/caas-config/json-config/config/P_shopTX/G_Invoicing_and_Documents/120_DocumentTransformerConfigDO/DocumentTransformerConfigDO_Shop_test_shop_TX.iombc'","configName":"ci"}
{"tenant":"Intershop","environment":"2.17.0.0-SNAPSHOT","logHost":"iom-6c587ddd87-42k4f","logVersion":"1.0","appName":"iom-dbinit","appVersion":"2.17.0.0-SNAPSHOT@1234","logType":"script","timestamp":"2019-12-13T13:35:45+00:00","level":"INFO","processName":"apply_json_config.sh","message":"processing file '/opt/caas-config/json-config/config/P_shopTX/H_Shop2PaymentProvider2Payment/010_Shop2PaymentProvider2PaymentDefDO/Shop2PaymentProvider2PaymentDefDO_test_shop_TX.iombc'","configName":"ci"}
...
              
# Print formatted json messages
cmd_producing_json | jq
...
{
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-42k4f",
  "logVersion": "1.0",
  "appName": "iom-dbinit",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "logType": "script",
  "timestamp": "2019-12-13T13:35:45+00:00",
  "level": "INFO",
  "processName": "apply_json_config.sh",
  "message": "processing file '/opt/caas-config/json-config/config/P_shopTX/G_Invoicing_and_Documents/120_DocumentTransformerConfigDO/DocumentTransformerConfigDO_Shop_test_shop_TX.iombc'",
  "configName": "ci"
}
{
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-42k4f",
  "logVersion": "1.0",
  "appName": "iom-dbinit",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "logType": "script",
  "timestamp": "2019-12-13T13:35:45+00:00",
  "level": "INFO",
  "processName": "apply_json_config.sh",
  "message": "processing file '/opt/caas-config/json-config/config/P_shopTX/H_Shop2PaymentProvider2Payment/010_Shop2PaymentProvider2PaymentDefDO/Shop2PaymentProvider2PaymentDefDO_test_shop_TX.iombc'",
  "configName": "ci"
}
...
  
# Get entries, where key "level" has value "ERROR"
cmd_producing_json | jq 'select(.level == "ERROR")'
...
{
  "timestamp": "2019-12-13T11:55:23.608Z",
  "sequence": 1349200,
  "loggerClassName": "org.jboss.logging.DelegatingBasicLogger",
  "loggerName": "org.hibernate.engine.jdbc.spi.SqlExceptionHelper",
  "level": "ERROR",
  "message": "javax.resource.ResourceException: IJ000453: Unable to get managed connection for java:/OmsDB",
  "threadName": "EJB default - 61",
  "threadId": 1113,
  "mdc": {},
  "ndc": "",
  "hostName": "iom-6c587ddd87-zlznn",
  "processName": "jboss-modules.jar",
  "processId": 288,
  "sourceClassName": "org.hibernate.engine.jdbc.spi.SqlExceptionHelper",
  "sourceFileName": "SqlExceptionHelper.java",
  "sourceMethodName": "logExceptions",
  "sourceLineNumber": 142,
  "sourceModuleName": "org.hibernate",
  "sourceModuleVersion": "5.3.10.Final",
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-zlznn",
  "logVersion": "1.0",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "appName": "iom-app",
  "logType": "message",
  "configName": "ci"
}
...
  
# Get entries, where key "level" has value "ERROR" and "sourceModuleName" has value "deployment.oms.monitoring-app-2.17.0.0-SNAPSHOT.war"
cmd_producing_json | jq 'select((.level == "ERROR") and (.sourceModuleName == "deployment.oms.monitoring-app-2.17.0.0-SNAPSHOT.war"))'
...
{
  "timestamp": "2019-12-13T11:50:59.698Z",
  "sequence": 1338700,
  "loggerClassName": "org.slf4j.impl.Slf4jLogger",
  "loggerName": "com.intershop.oms.monitoring.internal.rest.HealthServiceTimer",
  "level": "ERROR",
  "message": "Server not available because of missing database connection.",
  "threadName": "EJB default - 92",
  "threadId": 1222,
  "mdc": {},
  "ndc": "",
  "hostName": "iom-6c587ddd87-zlznn",
  "processName": "jboss-modules.jar",
  "processId": 288,
  "sourceClassName": "com.intershop.oms.monitoring.internal.rest.HealthServiceTimer",
  "sourceFileName": "HealthServiceTimer.java",
  "sourceMethodName": "doHealthCheck",
  "sourceLineNumber": 305,
  "sourceModuleName": "deployment.oms.monitoring-app-2.17.0.0-SNAPSHOT.war",
  "sourceModuleVersion": null,
  "tenant": "Intershop",
  "environment": "2.17.0.0-SNAPSHOT",
  "logHost": "iom-6c587ddd87-zlznn",
  "logVersion": "1.0",
  "appVersion": "2.17.0.0-SNAPSHOT@1234",
  "appName": "iom-app",
  "logType": "message",
  "configName": "ci"
}
...

# Get only values "timestamp" and "message" of entries, where key "level" has value "ERROR"
cmd_producing_json | jq 'select(.level == "ERROR") | .timestamp .message'
...
"2019-12-13T11:49:27.58Z"
"WFLYEJB0034: EJB Invocation failed on component MonitoringPersistenceBean for method public abstract bakery.persistence.dataobject.monitoring.HealthCheckStatusDO bakery.persistence.service.monitoring.MonitoringPersistenceService.getServerStatus(java.lang.String)"
"2019-12-13T11:49:27.624Z"
"WFLYEJB0034: EJB Invocation failed on component MonitoringLogicBean for method public abstract void com.intershop.oms.monitoring.capi.logic.MonitoringLogicService.setServerStatus(com.intershop.oms.monitoring.capi.rest.HealthCheckStatus)"
"2019-12-13T11:49:27.625Z"
" (systemPU) exception found for object 'class bakery.persistence.dataobject.monitoring.HealthCheckStatusDO'"
"2019-12-13T11:49:27.625Z"
"Server not available because of missing database connection."
"2019-12-13T11:49:27.631Z"
"WFLYEJB0022: Error during retrying timeout for timer: [id=9cd75873-66b1-4fdd-8155-fb859d7dc73e timedObjectId=oms.monitoring-app-2.17.0.0-SNAPSHOT.oms.monitoring-app-2.17.0.0-SNAPSHOT.HealthServiceTimer auto-timer?:false persistent?:false timerService=org.jboss.as.ejb3.timerservice.TimerServiceImpl@d537ad6 initialExpiration=Fri Dec 13 11:12:17 UTC 2019 intervalDuration(in milli sec)=5000 nextExpiration=Fri Dec 13 11:49:32 UTC 2019 timerState=RETRY_TIMEOUT info= startAT=Fri Dec 13 11:12:17 UTC 2019, runInterval=5000, cacheTime=11000]"
"2019-12-13T11:49:30.006Z"
"Error"
...

# Get only values "timestamp", "message" and "sourceFileName" of entries, where key "level" has value "ERROR" in a new json structure
cmd_producing_json | jq 'select(.level == "ERROR") | {timestamp: .timestamp, message: .message, sourceFileName: .sourceFileName}'
...
{
  "timestamp": "2019-12-13T11:50:11.467Z",
  "message": "WFLYEJB0034: EJB Invocation failed on component CancelOrderControllerBean for method public abstract void bakery.control.controller.ControllerJob.execute()",
  "sourceFileName": "LoggingInterceptor.java"
}
{
  "timestamp": "2019-12-13T11:50:11.472Z",
  "message": "javax.resource.ResourceException: IJ000453: Unable to get managed connection for java:/OmsDB",
  "sourceFileName": "SqlExceptionHelper.java"
}
{
  "timestamp": "2019-12-13T11:50:11.478Z",
  "message": "WFLYEJB0034: EJB Invocation failed on component CheckBonusPointsControllerBean for method public abstract void bakery.control.controller.ControllerJob.execute()",
  "sourceFileName": "LoggingInterceptor.java"
}
{
  "timestamp": "2019-12-13T11:50:11.486Z",
  "message": "WFLYEJB0034: EJB Invocation failed on component ProcessControlConfigBean for method public abstract java.util.Collection bakery.persistence.service.configuration.process.ProcessControlConfigService.loadModifiedConfigs()",
  "sourceFileName": "LoggingInterceptor.java"
}
...
        </div></code></pre>
        
        <h3 id="log-messages--devenv">Log-messages of devenv-cli.sh</h3>
        <p>
          Logging of <samp>devenv-cli.sh</samp> is controlled by configuration variable <samp>OMS_LOGLEVEL_DEVENV</samp>. Since every execution of <samp>devenv-cli.sh</samp> reads the configuration file, changes of this variable becomes effective immediately.
        </p><p>
          As mentioned <a href="#log-messages--jq">above</a>, all log-messages of <samp>devenv-cli.sh</samp> are written in json format. Hence, it's a good idea to pipe the output of <samp>devenv-cli.sh</samp> through <samp>jq</samp>, for better readability of messages.
        </p><p>
          Unfortunately, it is not as simple, as it seems at first glance. There three reasons, that make it more complicated:
          <ul>
            <li>Not every output of <samp>devenv-cli.sh</samp> is a log-message, but only log-messages are provided in json format. <samp>'info *'</samp> commands and all help-messages are written as plain-text. When piping this output through <samp>jq</samp>, no messages can be seen at all.</li>
            <li>Some commands provide a mixture of log-messages of <samp>devenv-cli.sh</samp> and <samp>IOM</samp>. Developer commands (<samp>'apply *'</samp>) are behaving like that. E.g., when applying a sql-configuration, using <samp>'apply sql-config'</samp>, there are log-messages of <samp>devenv-cli.sh</samp>, that are reporting the progress of the process (create kubernetes-job, delete kubernetes-job, etc.) and there are other log-messages coming directly from IOM, which are giving information about applying SQL-configuration. In this case, only the log-messages of <samp>devenv-cli.sh</samp> are controlled by variable <samp>OMS_LOGLEVEL_DEVENV</samp>. The messages of IOM are controlled by other <samp>OMS_LOGLEVEL_*</samp> variables, see <a href="#log-messages--iom-containers">section below</a>.</li>
            <li>Finally there are the <samp>'log *'</samp> commands, that try to ease the access to messages created by IOM containers. For more information, see <a href="#log-messages--log-cmd">section below</a>.</li>
          </ul>
        </p><p>
          Hence, the following hints should be taken into account, when using <samp>devenv-cli.sh</samp> along with <samp>jq</samp>:
          <ul>
            <li>Never pipe the output of <samp>devenv-cli.sh</samp> through <samp>jq</samp>, when you want to get help for a command,</li>
            <li>Never pipe the output of <samp>devenv-cli.sh</samp> through <samp>jq</samp>, when you are using the <samp>'info *'</samp> command.</li>
          </ul>
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# example of jq-usage along with devenv-cli.sh
# creates a pretty-printed version of log-messages 
${ENV_DIR}/devenv-cli.sh create iom | jq

# never pipe output of devenv-cli.sh through jq, when requesting help
# example:
${ENV_DIR}/devenv-cli.sh create iom --help

# never pipe the output of 'info *' command through jq
# example:
${ENV_DIR}/devenv-cli.sh info iom
        </div></code></pre>

        <h3 id="log-messages--iom-containers">Log-messages of IOM containers</h3>
        <p>
          Besides the IOM application container, two init-containers are belonging to IOM too. All these containers are writing messages in json format to <samp>standard out</samp>. The log-levels of these messages are controlled by variables:
          <ul>
            <li><samp>OMS_LOGLEVEL_CONSOLE</samp></li>
            <li><samp>OMS_LOGLEVEL_IOM</samp></li>
            <li><samp>OMS_LOGLEVEL_HIBERNATE</samp></li>
            <li><samp>OMS_LOGLEVEL_QUARTZ</samp></li>
            <li><samp>OMS_LOGLEVEL_CUSTOMIZATION</samp></li>
            <li><samp>OMS_LOGLEVEL_SCRIPTS</samp></li>
          </ul>
          The values of these log-levels cannot be changed at runtime. For a change to take effect, IOM has to be deleted and newly created.
        </p><p>
          Beside these application level messages, access logs are written to <samp>standard out</samp> in json format too. Hence, the output of the IOM containers is a mixture of different logs.
        </p><p>
          You can use <samp>kubectl</samp> to access this messages. In general these message can be provided in two different ways:
          <ul>
            <li>get all messages since container start and finish after that,</li>
            <li>get only new messages and wait for upcoming messages (follow new messages).</li>
          </ul>
          The according <samp>kubectl</samp> command lines are provided by the <samp>'info iom'</samp> command.
        </p><p>
          Hence, if you use <samp>kubectl</samp> to get log-messages of IOM, you will get everything mixed in one stream (messages and access-log) exactly as defined by the current logging configuration. E.g., if currently a log-level is set to <samp>INFO</samp>, but you are interessed in <samp>FATAL</samp>, <samp>ERROR</samp> and <samp>WARN</samp> messages only, you have to write an according <samp>jq</samp> command line by your own, to get the requested messages only (see <a href="log-messages--jq">section jq</a>).
        </p><p>
          The following box shows some examples, how to access log-messages of IOM containers and how to filter and format them with the help of <samp>jq</samp>.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# get all FATAL, ERROR and WARN messages produced by IOM application container (don't follow new messages)
#  kubectl command line was taken from output of 'info iom' command
#  output is filtered by jq
#  - ignore any lines, that are not valid json structures
#  - print only json messages, with 'level' element having the value 'FATAL', 'ERROR' or 'WARN'
kubectl logs iom-6c587ddd87-42k4f --namespace 21700snapshot -c iom |
  jq -R 'fromjson? | select(type == "object")' |
  jq 'select((.level == "FATAL") or (.level == "ERROR") or (.level == "WARN"))'

# follow new access log entries, having a status code indicating an error
#  kubectl command line was taken from output of 'info iom' command
#  output is filtered by jq
#  - ignore any lines, that are not valid json structures
#  - show only json messages with 'logType' element having the value 'access'
#  - show only json messages with 'responceCode' element having a value greater or equal 400
kubectl logs --tail=1 -f iom-6c587ddd87-42k4f --namespace 21700snapshot -c iom |
  jq -R 'fromjson? | select(type == "object")' |
  jq 'select((.logType == "access" ) and (.responseCode >= 400))'
        </div></code></pre>

        <h3 id="log-messages--log-cmd">devenv-cli's 'log *' commands</h3>
        <p>
          The <a href="#log-messages--iom-containers">section before</a> showed how to get messages out of the IOM containers and how to further process them with the help of <samp>jq</samp>. This is a valid procedure, if special requirements have to be matched. But there are some standard situations, which should be easier to handle. For this reason <samp>devenv-cli.sh</samp> provides the <samp>'log *'</samp> commands.
        </p><p>
          The <samp>'log *'</samp> commands makes it easy to access the logs of different IOM containers and also to access the different types of logs of IOM's application container. It is the very only command, that is using <samp>jq</samp> internally to provide a basic filtering and formatting of messages. With help of the <samp>'log *'</samp> commands you can do the following:
          <ul>
            <li>View log-messages of dbaccount, config or application container:</li>
            <ul>
              <li>filter them for passed level and all higher levels. E.g. when level <samp>WARN</samp> is passed as argument to the <samp>log</samp> command, messages of levels <samp>FATAL</samp>, <samp>ERROR</samp> and <samp>WARN</samp> will be printed only.</li>
              <li>show all messages or follow only new messages.</li>
              <li>format the messages or leave them unformatted for further processing with <samp>jq</samp>.</li>
            </ul>
            <li>View access logs of application container:</li>
            <ul>
              <li>filter them for http-status code: show all or only those requests, that had an http-status code >= 400.</li>
              <li>show all access log entries or follow only new ones.</li>
              <li>format the access-log entries or leave them unformatted for further processing with <samp>jq</samp>.</li>
            </ul>
          </ul>
          The following box shows some examples how to use the <samp>'log *'</samp> commands.
        </p>
        <pre class="prettyprint lang-bash"><code><div class="col-xs-12">
# show FATAL, ERROR and WARN messages of IOM's config container and format them
${ENV_DIR}/devenv-cli.sh log config

# follow FATAL, ERROR and WARN messages of IOM's application container and format the messages
${ENV_DIR}/devenv-cli.sh log app -f

# follow all access log entries, that have a response time > 100 ms
# do not format messages to be able to process output by a second jq stage
${ENV_DIR}/devenv-cli.sh log access all -f | jq 'select(.responseTime > 100)'
        </div></code></pre>

        <h2 id="troubleshooting">Troubleshooting</h2>

        <h3 id="troubleshooting--shared-drives">Shared Drives</h3>
        <p>
        After resetting your password you can have some problems with your shared drives. In those cases use the Settings > Shared Drives > Reset credentials
        </p>
      <br><br>

      </div> <!-- /container -->


      <!-- Bootstrap core JavaScript
      ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>

      <script>

          // toogle icon and title
          function toggleAliasButton(e) {

              var icon = $(e.target);
              var button = icon.parent();

              // if the button was clicked instead of the icon
              if($(e.target).children('i').length) {
                  button = $(e.target);
                  icon = button.find('i');
              }

              icon.toggleClass('fa-plus');
              icon.toggleClass('fa-minus');

              var title = 'Show aliases';

              if( icon.hasClass('fa-minus')){
                 title = 'Hide aliases';
              }

              button.attr('title', title);
          }
          $('.alias-toggle').on('click', toggleAliasButton);

      </script>

      <!-- Latest compiled and minified JavaScript -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    </body>
</html>
